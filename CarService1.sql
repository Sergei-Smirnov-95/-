create database 'D:\7_sem\carservice.fdb' user 'SYSDBA' password 'masterkey';
commit;
connect 'D:\7_sem\carservice.fdb' user 'SYSDBA' password 'masterkey';
commit;

CREATE TABLE Client (
	ClientID int PRIMARY KEY,
	BID int,
	Surname VARCHAR(20),
	Name VARCHAR(20),
	Phone DECIMAL(11)
);

CREATE TABLE Bonus (
	BID int PRIMARY KEY,
	SUMM int,
	discount int
);

CREATE TABLE Ser_info (
	SID int PRIMARY KEY,
	Price int,
	Date_in DATE,
	Date_craft DATE,
	CarID int
);

CREATE TABLE Car (
	CarID int PRIMARY KEY,
	VIN DECIMAL(15),
	ODO DECIMAL(6),
	ClientID int
);

CREATE TABLE Work_Parts (

	WorkID int,
	SID int,
	WPID int PRIMARY KEY
);

CREATE TABLE Parts (
	PartID int PRIMARY KEY,
	Price DECIMAL,
	Descr VARCHAR(10)
);

CREATE TABLE Works (
	WorkID int PRIMARY KEY,
	Price DECIMAL,
	Descr VARCHAR(10)
);
CREATE TABLE Id_Part ( 
	WPID int, 
	PartID int, 
	id int PRIMARY KEY
);

ALTER TABLE Client ADD CONSTRAINT Client_fk0 FOREIGN KEY (BID) REFERENCES Bonus(BID);

ALTER TABLE Ser_info ADD CONSTRAINT Ser_info_fk0 FOREIGN KEY (CarID) REFERENCES Car(CarID);

ALTER TABLE Car ADD CONSTRAINT Car_fk0 FOREIGN KEY (ClientID) REFERENCES Client(ClientID);

ALTER TABLE Work_Parts ADD CONSTRAINT Work_Parts_fk0 FOREIGN KEY (WorkID) REFERENCES Works(WorkID);

ALTER TABLE Work_Parts ADD CONSTRAINT Work_Parts_fk1 FOREIGN KEY (SID) REFERENCES Ser_info(SID);

ALTER TABLE Id_Part ADD CONSTRAINT Id_Part_fk0 FOREIGN KEY (WPID) REFERENCES Work_Parts(WPID);

ALTER TABLE Id_Part ADD CONSTRAINT Id_part_fk1 FOREIGN KEY (PartID) REFERENCES Parts(PartID);

commit;

INSERT INTO Bonus VALUES(1,1000,1);
INSERT INTO Bonus VALUES(2,2000,2);
INSERT INTO Bonus VALUES(3,3000,3);
INSERT INTO Bonus VALUES(4,4000,4);
INSERT INTO Bonus VALUES(5,5000,5);
INSERT INTO Bonus VALUES(6,10000,7);

INSERT INTO Client VALUES(1,1,'Smirnov','Sergei',89210987330);
INSERT INTO Client VALUES(2,3,'Goremykina','Olga',89210987330);
INSERT INTO Client VALUES(3,6,'Drozdovski','Alex',89210987330);
INSERT INTO Client VALUES(4,2,'Evseev','Evgeni',89210987330);
INSERT INTO Client VALUES(5,4,'Kolpinski','Sasha',89210987330);
INSERT INTO Client VALUES(6,5,'Kalugina','Maria',89210987330);

INSERT INTO Car VALUES(1,999999999999999,999999,1);
INSERT INTO Car VALUES(2,000000000000000,000000,2);
INSERT INTO Car VALUES(3,111111111111111,999900,3);
INSERT INTO Car VALUES(4,222222222222222,400000,5);
INSERT INTO Car VALUES(5,333333333333333,500000,4);
INSERT INTO Car VALUES(6,444444444444444,200000,6);


INSERT INTO Ser_info VALUES(1,1,'2013-09-01','2013-09-02',1);
INSERT INTO Ser_info VALUES(2,10,'2016-09-01','2016-09-02',1);
INSERT INTO Ser_info VALUES(3,100,'2013-09-01','2016-09-02',4);
INSERT INTO Ser_info VALUES(4,1000,'2014-09-01','2014-09-02',3);
INSERT INTO Ser_info VALUES(5,10000,'2015-09-01','2015-09-02',5);
INSERT INTO Ser_info VALUES(6,20000,'2014-09-03','2014-09-07',6);

INSERT INTO Work_Parts VALUES(1,1,1);
INSERT INTO Work_Parts VALUES(2,1,2);
INSERT INTO Work_Parts VALUES(3,6,1);
INSERT INTO Work_Parts VALUES(4,3,2);
INSERT INTO Work_Parts VALUES(5,4,3);
INSERT INTO Work_Parts VALUES(6,5,4);

INSERT INTO Works VALUES(1,500,'Diagnostika');
INSERT INTO Works VALUES(2,5000,'Pokraska elementa');
INSERT INTO Works VALUES(3,700,'Zamena masla');
INSERT INTO Works VALUES(4,1200,'Zamena stoiki stabilizatora');
INSERT INTO Works VALUES(5,2300,'Zamena podshipnikov generatora');
INSERT INTO Works VALUES(6,5000,'Promyvka forsunok');


INSERT INTO Id_Part VALUES(1,1,1);
INSERT INTO Id_Part VALUES(2,5,2);
INSERT INTO Id_Part VALUES(2,2,3);
INSERT INTO Id_Part VALUES(3,1,4);
INSERT INTO Id_Part VALUES(4,3,5);
INSERT INTO Id_Part VALUES(5,4,6);

INSERT INTO Parts VALUES(1,2500,'Maslo Castrol 5w30');
INSERT INTO Parts VALUES(2,500,'Filter maslyanii 914/2 MAN');
INSERT INTO Parts VALUES(3,1500,'Stoika stab volvo xc70/ffocus2');
INSERT INTO Parts VALUES(4,200,'Podshipnik 203');
INSERT INTO Parts VALUES(5,800,'Kolodki Largus 16v');


commit;
show tables;